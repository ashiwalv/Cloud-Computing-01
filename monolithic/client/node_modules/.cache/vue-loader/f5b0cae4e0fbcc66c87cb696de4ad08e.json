{"remainingRequest":"/home/muddasir/work/SDMHmi/sdm_hmi/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/muddasir/work/SDMHmi/sdm_hmi/client/src/components/Conveyor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/muddasir/work/SDMHmi/sdm_hmi/client/src/components/Conveyor.vue","mtime":1610385120459},{"path":"/home/muddasir/work/SDMHmi/sdm_hmi/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muddasir/work/SDMHmi/sdm_hmi/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IG1hbmFnZXIgPSByZXF1aXJlKCIuLi9vcGN1YS1tYW5hZ2VyIik7CmxldCBkb3VibGVDbGlja0RlbGF5ID0gcmVxdWlyZSgiLi4vLi4vY2xpZW50LmNvbmZpZyIpLmRvdWJsZUNsaWNrRGVsYXk7CmltcG9ydCB7IGRpYWxvZ1BhcmFtZXRlciB9IGZyb20gIi4uL21haW4iOwpsZXQgbGFzdENsaWNrZWQgPSAwOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgc3BlZWQ6IDAsCiAgICAgIHVuaXQ6ICJSUE0iLAogICAgICBzdGF0dXM6IG51bGwsCiAgICAgIHNldHBvaW50OiBudWxsLAogICAgICBkaXJlY3Rpb246IG51bGwsCiAgICAgIHNlbnNvckJsb2NrZWQ6IGZhbHNlLAogICAgICBzZW5zb3JDb2xvcjogZmFsc2UsCiAgICAgIG1hbmFnZXI6IG1hbmFnZXIKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBzcGVlZG9tZXRlcjogcmVxdWlyZSgiLi9TcGVlZG9tZXRlciIpLmRlZmF1bHQKICB9LAogIHByb3BzOiBbImNvbnYiXSwKICBtZXRob2RzOiB7CiAgICBzaG93RGV0YWlsOiBmdW5jdGlvbigpIHsKICAgICAgbGV0IGN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKTsKICAgICAgaWYgKGN1cnJlbnRUaW1lIC0gbGFzdENsaWNrZWQgPj0gZG91YmxlQ2xpY2tEZWxheSkKICAgICAgICBsYXN0Q2xpY2tlZCA9IGN1cnJlbnRUaW1lOwogICAgICAvLyBkb3VibGUgY2xpY2sgdG8gb3BlbiB0aGUgZGlhbG9nCiAgICAgIGVsc2UgewogICAgICAgIGRpYWxvZ1BhcmFtZXRlci5jb252ID0gdGhpcy5jb252OwogICAgICAgIHRoaXMuJGRpYWxvZwogICAgICAgICAgLmFsZXJ0KHRoaXMuY29udiwgewogICAgICAgICAgICB2aWV3OiAiY29udmV5b3ItZGV0YWlsIiwKICAgICAgICAgICAgaHRtbDogdHJ1ZQogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRpYWxvZykgewogICAgICAgICAgICBjb25zb2xlLmxvZygiY2xvc2VkIik7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiY2FuY2VsZWQiKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2V0U2V0UG9pbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIHRoaXMubWFuYWdlci53cml0ZSh0aGlzLmNvbnYsICJzZXRwb2ludCIsIHRoaXMuc2V0cG9pbnQpOwogICAgfSwKICAgIHN0YXJ0U3RvcDogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgdGhpcy5tYW5hZ2VyLmNhbGwodGhpcy5jb252LCAic3RhcnRfc3RvcCIpOwogICAgfSwKICAgIGNoYW5nZURpcmVjdGlvbjogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgdGhpcy5tYW5hZ2VyLmNhbGwodGhpcy5jb252LCAiZndkX3JldiIpOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubWFuYWdlci5zdWJzY3JpYmUoYCR7dGhpcy5jb252fS5fc3RhdHVzYCwgdGhpcywgZnVuY3Rpb24oCiAgICAgIGNvbnRleHQsCiAgICAgIHZhbHVlCiAgICApIHsKICAgICAgY29udGV4dC5zdGF0dXMgPSB2YWx1ZTsKICAgIH0pOwogICAgLy8gdGhpcy5tYW5hZ2VyLnN1YnNjcmliZShgJHt0aGlzLmNvbnZ9LnNldHBvaW50YCwgdGhpcywgZnVuY3Rpb24oCiAgICAvLyAgIGNvbnRleHQsCiAgICAvLyAgIHZhbHVlCiAgICAvLyApIHsKICAgIC8vICAgY29udGV4dC5zZXRwb2ludCA9IHZhbHVlOwogICAgLy8gfSk7CiAgICB0aGlzLm1hbmFnZXIuc3Vic2NyaWJlKGAke3RoaXMuY29udn0udW5pdGAsIHRoaXMsIGZ1bmN0aW9uKGNvbnRleHQsIHZhbHVlKSB7CiAgICAgIGNvbnRleHQudW5pdCA9IHZhbHVlOwogICAgfSk7CiAgICB0aGlzLm1hbmFnZXIuc3Vic2NyaWJlKGAke3RoaXMuY29udn0uc3BlZWRgLCB0aGlzLCBmdW5jdGlvbigKICAgICAgY29udGV4dCwKICAgICAgdmFsdWUKICAgICkgewogICAgICBjb250ZXh0LnNwZWVkID0gdmFsdWU7CiAgICB9KTsKICAgIHRoaXMubWFuYWdlci5zdWJzY3JpYmUoYCR7dGhpcy5jb252fS5kaXJlY3Rpb25gLCB0aGlzLCBmdW5jdGlvbigKICAgICAgY29udGV4dCwKICAgICAgdmFsdWUKICAgICkgewogICAgICBjb250ZXh0LmRpcmVjdGlvbiA9IHZhbHVlOwogICAgfSk7CiAgfQp9Owo="},{"version":3,"sources":["Conveyor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Conveyor.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"factory-item\" @click=\"showDetail\">\n    <h2 class=\"container\">\n      <label>{{ conv }}</label>\n      <div\n        v-bind:style=\"sensorBlocked ? 'background-color:black' : ''\"\n        @click.stop=\"sensorBlocked=!sensorBlocked\"\n        class=\"sensor\"\n      ></div>\n      <div\n        v-bind:style=\"sensorColor ? 'background-color:yellow' : ''\"\n        @click.stop=\"sensorColor=!sensorColor\"\n        class=\"sensor\"\n        title=\"Color sensor\"\n      ></div>\n      <img v-if=\"status !== 'online'\" src=\"../../img/warning.svg\" title=\"node is offline\" />\n    </h2>\n    <div class=\"container\">\n      <label>{{speed}}: {{unit}}</label>\n      <button\n        @click.stop=\"changeDirection\"\n        v-if=\"direction==='FORWARD'\"\n        class=\"image-button\"\n        title=\"Direction\"\n      >\n        <img src=\"../../img/double-arrow-right.svg\" width=\"35\" />\n      </button>\n      <button\n        @click.stop=\"changeDirection\"\n        v-if=\"direction!=='FORWARD'\"\n        class=\"image-button\"\n        title=\"Direction\"\n      >\n        <img src=\"../../img/double-arrow-left.svg\" width=\"35\" />\n      </button>\n      <div>\n        <input\n          class=\"setpoint-input\"\n          @click.stop\n          v-model.number=\"setpoint\"\n          placeholder=\"Setpoint\"\n          type=\"number\"\n          id=\"inputName\"\n          min=\"0\"\n          max=\"100\"\n        />\n        <button @click.stop=\"setSetPoint\">Set</button>\n      </div>\n    </div>\n    <div class=\"container\">\n      <label>{{speed}}: {{unit}}</label>\n      <button\n        @click.stop=\"changeDirection\"\n        v-if=\"direction!=='FORWARD'\"\n        class=\"image-button\"\n        title=\"Direction\"\n      >\n        <img src=\"../../img/double-arrow-right.svg\" width=\"35\" />\n      </button>\n      <button\n        @click.stop=\"changeDirection\"\n        v-if=\"direction==='FORWARD'\"\n        class=\"image-button\"\n        title=\"Direction\"\n      >\n        <img src=\"../../img/double-arrow-left.svg\" width=\"35\" />\n      </button>\n      <div>\n        <input\n          class=\"setpoint-input\"\n          @click.stop\n          v-model.number=\"setpoint\"\n          placeholder=\"Setpoint\"\n          type=\"number\"\n          id=\"inputName\"\n          min=\"0\"\n          max=\"100\"\n        />\n        <button @click.stop=\"setSetPoint\">Set</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\nbutton {\n  width: 60px;\n}\ninput {\n  min-width: 100px;\n}\n.container {\n  display: inline-flex;\n  align-items: center;\n  margin-bottom: 5px;\n}\n.container > * {\n  margin-right: 5px;\n}\n</style>\n\n<script>\nconst manager = require(\"../opcua-manager\");\nlet doubleClickDelay = require(\"../../client.config\").doubleClickDelay;\nimport { dialogParameter } from \"../main\";\nlet lastClicked = 0;\n\nexport default {\n  data: function() {\n    return {\n      speed: 0,\n      unit: \"RPM\",\n      status: null,\n      setpoint: null,\n      direction: null,\n      sensorBlocked: false,\n      sensorColor: false,\n      manager: manager\n    };\n  },\n  components: {\n    speedometer: require(\"./Speedometer\").default\n  },\n  props: [\"conv\"],\n  methods: {\n    showDetail: function() {\n      let currentTime = Date.now();\n      if (currentTime - lastClicked >= doubleClickDelay)\n        lastClicked = currentTime;\n      // double click to open the dialog\n      else {\n        dialogParameter.conv = this.conv;\n        this.$dialog\n          .alert(this.conv, {\n            view: \"conveyor-detail\",\n            html: true\n          })\n          .then(function(dialog) {\n            console.log(\"closed\");\n          })\n          .catch(function() {\n            console.log(\"canceled\");\n          });\n      }\n    },\n    setSetPoint: function(event) {\n      this.manager.write(this.conv, \"setpoint\", this.setpoint);\n    },\n    startStop: function(event) {\n      this.manager.call(this.conv, \"start_stop\");\n    },\n    changeDirection: function(event) {\n      this.manager.call(this.conv, \"fwd_rev\");\n    }\n  },\n  mounted() {\n    this.manager.subscribe(`${this.conv}._status`, this, function(\n      context,\n      value\n    ) {\n      context.status = value;\n    });\n    // this.manager.subscribe(`${this.conv}.setpoint`, this, function(\n    //   context,\n    //   value\n    // ) {\n    //   context.setpoint = value;\n    // });\n    this.manager.subscribe(`${this.conv}.unit`, this, function(context, value) {\n      context.unit = value;\n    });\n    this.manager.subscribe(`${this.conv}.speed`, this, function(\n      context,\n      value\n    ) {\n      context.speed = value;\n    });\n    this.manager.subscribe(`${this.conv}.direction`, this, function(\n      context,\n      value\n    ) {\n      context.direction = value;\n    });\n  }\n};\n</script>\n"]}]}