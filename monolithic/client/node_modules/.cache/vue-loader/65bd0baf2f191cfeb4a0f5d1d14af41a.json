{"remainingRequest":"/home/muddasir/work/SDMHmi/sdm_hmi/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/muddasir/work/SDMHmi/sdm_hmi/client/src/components/CustomerViewOrders.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/muddasir/work/SDMHmi/sdm_hmi/client/src/components/CustomerViewOrders.vue","mtime":1580830845099},{"path":"/home/muddasir/work/SDMHmi/sdm_hmi/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muddasir/work/SDMHmi/sdm_hmi/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IG1hbmFnZXIgPSByZXF1aXJlKCIuLi9vcGN1YS1tYW5hZ2VyIik7CmNvbnN0IHV0aWxzID0gcmVxdWlyZSgiLi4vdXRpbHMiKTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogbnVsbCwKICAgICAgb3JkZXJzOiBbXSwKICAgICAgY29sdW1uczogWyJzdGF0ZSIsICJjb2xhIiwgInJhc3BiZXJyeSIsICJsZW1vbiIsICJzdHJhd2JlcnJ5IiwgIm9yYW5nZSJdLAogICAgICBzb3J0T3JkZXJzOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldE9yZGVyczogZnVuY3Rpb24oKSB7CiAgICAgIG1hbmFnZXIuZ2V0T3JkZXJzKHRoaXMubmFtZSwgb3JkZXJzID0+IHsKICAgICAgICBjb25zb2xlLmxvZygicmVjZWl2ZWQgb3JkZXJzOiIsIG9yZGVycyk7CiAgICAgICAgdGhpcy5vcmRlcnMgPSBvcmRlcnM7CiAgICAgIH0pOwogICAgfSwKICAgIHNvcnRCeTogZnVuY3Rpb24oa2V5KSB7CiAgICAgIGxldCBzb3J0T3JkZXIgPSB0aGlzLnNvcnRPcmRlcnNba2V5XSB8fCAxOwogICAgICB0aGlzLnNvcnRPcmRlcnNba2V5XSA9IHNvcnRPcmRlciAqIC0xOwogICAgICB0aGlzLm9yZGVycyA9IHRoaXMub3JkZXJzLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICBhID0gYVtrZXldOwogICAgICAgIGIgPSBiW2tleV07CiAgICAgICAgY29uc29sZS5sb2coYSwgYiwga2V5KTsKICAgICAgICByZXR1cm4gKGEgPT09IGIgPyAwIDogYSA+IGIgPyAxIDogLTEpICogc29ydE9yZGVyOwogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxPcmRlcjogZnVuY3Rpb24ob3JkZXIpIHsKICAgICAgbWFuYWdlci5jYW5jZWxPcmRlcihvcmRlciwgKCkgPT4gewogICAgICAgIHRoaXMuZ2V0T3JkZXJzKCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgZmlsdGVyczogewogICAgY2FwaXRhbGl6ZTogc3RyID0+IHsKICAgICAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTsKICAgIH0sCiAgICBmb3JtYXREYXRlOiB0aW1lc3RhbXAgPT4gewogICAgICByZXR1cm4gdXRpbHMuZm9ybWF0RGF0ZSh0aW1lc3RhbXApOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubmFtZSA9IHRoaXMuJHJvb3QudXNlck5hbWU7CiAgICB0aGlzLmdldE9yZGVycygpOwogIH0KfTsK"},{"version":3,"sources":["CustomerViewOrders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CustomerViewOrders.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h1>View orders for {{ name }}</h1>\n    <table class=\"table table-striped table-bordered\">\n      <thead>\n        <tr>\n          <th scope=\"row\" />\n          <th\n            scope=\"row\"\n            @click=\"sortBy('waitingTime')\"\n          >Created</th>\n          <th\n            scope=\"row\"\n            v-for=\"key in columns\"\n            :key=\"key\"\n            @click=\"sortBy(key)\"\n          >{{key | capitalize}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr\n          v-for=\"order in orders\"\n          :key=\"order.id\"\n        >\n          <td>\n            <button\n              class=\"btn btn-primary\"\n              @click=\"cancelOrder(order)\"\n              :disabled=\"order.state!='waiting'\"\n            >Cancel</button>\n          </td>\n          <td>{{order.waitingTime | formatDate}}</td>\n          <td\n            v-for=\"key in columns\"\n            :key=\"key\"\n          >{{order[key]}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n<script>\nconst manager = require(\"../opcua-manager\");\nconst utils = require(\"../utils\");\nexport default {\n  data: function() {\n    return {\n      name: null,\n      orders: [],\n      columns: [\"state\", \"cola\", \"raspberry\", \"lemon\", \"strawberry\", \"orange\"],\n      sortOrders: {}\n    };\n  },\n  methods: {\n    getOrders: function() {\n      manager.getOrders(this.name, orders => {\n        console.log(\"received orders:\", orders);\n        this.orders = orders;\n      });\n    },\n    sortBy: function(key) {\n      let sortOrder = this.sortOrders[key] || 1;\n      this.sortOrders[key] = sortOrder * -1;\n      this.orders = this.orders.sort((a, b) => {\n        a = a[key];\n        b = b[key];\n        console.log(a, b, key);\n        return (a === b ? 0 : a > b ? 1 : -1) * sortOrder;\n      });\n    },\n    cancelOrder: function(order) {\n      manager.cancelOrder(order, () => {\n        this.getOrders();\n      });\n    }\n  },\n  filters: {\n    capitalize: str => {\n      return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    formatDate: timestamp => {\n      return utils.formatDate(timestamp);\n    }\n  },\n  mounted() {\n    this.name = this.$root.userName;\n    this.getOrders();\n  }\n};\n</script>"]}]}