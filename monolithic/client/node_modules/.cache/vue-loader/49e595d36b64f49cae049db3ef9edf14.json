{"remainingRequest":"/home/muddasir/work/SDMHmi/sdm_hmi/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/muddasir/work/SDMHmi/sdm_hmi/client/src/components/ProductionManagerViewOrders.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/muddasir/work/SDMHmi/sdm_hmi/client/src/components/ProductionManagerViewOrders.vue","mtime":1580830845099},{"path":"/home/muddasir/work/SDMHmi/sdm_hmi/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muddasir/work/SDMHmi/sdm_hmi/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IG1hbmFnZXIgPSByZXF1aXJlKCIuLi9vcGN1YS1tYW5hZ2VyIik7CmNvbnN0IHV0aWxzID0gcmVxdWlyZSgiLi4vdXRpbHMiKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IG51bGwsCiAgICAgIG9yZGVyczogW10sCiAgICAgIGNvbHVtbnM6IFsKICAgICAgICAiaWQiLAogICAgICAgICJuYW1lIiwKICAgICAgICAic3RhdGUiLAogICAgICAgICJjb2xhIiwKICAgICAgICAicmFzcGJlcnJ5IiwKICAgICAgICAibGVtb24iLAogICAgICAgICJzdHJhd2JlcnJ5IiwKICAgICAgICAib3JhbmdlIgogICAgICBdLAogICAgICBzb3J0T3JkZXJzOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldE9yZGVyczogZnVuY3Rpb24oKSB7CiAgICAgIG1hbmFnZXIuZ2V0T3JkZXJzKCIiLCBvcmRlcnMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCJyZWNlaXZlZCBvcmRlcnM6Iiwgb3JkZXJzKTsKICAgICAgICB0aGlzLm9yZGVycyA9IG9yZGVyczsKICAgICAgfSk7CiAgICB9LAogICAgc29ydEJ5OiBmdW5jdGlvbihrZXkpIHsKICAgICAgbGV0IHNvcnRPcmRlciA9IHRoaXMuc29ydE9yZGVyc1trZXldIHx8IDE7CiAgICAgIHRoaXMuc29ydE9yZGVyc1trZXldID0gc29ydE9yZGVyICogLTE7CiAgICAgIHRoaXMub3JkZXJzID0gdGhpcy5vcmRlcnMuc29ydCgoYSwgYikgPT4gewogICAgICAgIGEgPSBhW2tleV07CiAgICAgICAgYiA9IGJba2V5XTsKICAgICAgICByZXR1cm4gKGEgPT09IGIgPyAwIDogYSA+IGIgPyAxIDogLTEpICogc29ydE9yZGVyOwogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxPcmRlcjogZnVuY3Rpb24ob3JkZXIpIHsKICAgICAgbWFuYWdlci5jYW5jZWxPcmRlcihvcmRlciwgKCkgPT4gewogICAgICAgIHRoaXMuZ2V0T3JkZXJzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGFib3J0T3JkZXI6IGZ1bmN0aW9uKG9yZGVyKSB7CiAgICAgIG1hbmFnZXIuYWJvcnRPcmRlcihvcmRlciwgKCkgPT4gewogICAgICAgIHRoaXMuZ2V0T3JkZXJzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGhvbGRPcmRlcjogZnVuY3Rpb24ob3JkZXIpIHsKICAgICAgbWFuYWdlci5ob2xkT3JkZXIob3JkZXIsICgpID0+IHsKICAgICAgICB0aGlzLmdldE9yZGVycygpOwogICAgICB9KTsKICAgIH0KICB9LAogIGZpbHRlcnM6IHsKICAgIGNhcGl0YWxpemU6IHN0ciA9PiB7CiAgICAgIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7CiAgICB9LAogICAgZm9ybWF0RGF0ZTogdGltZXN0YW1wID0+IHsKICAgICAgcmV0dXJuIHV0aWxzLmZvcm1hdERhdGUodGltZXN0YW1wKTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLm5hbWUgPSB0aGlzLiRyb290LnVzZXJOYW1lOwogICAgdGhpcy5nZXRPcmRlcnModGhpcy5uYW1lKTsKICB9Cn07Cg=="},{"version":3,"sources":["ProductionManagerViewOrders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductionManagerViewOrders.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h1>Production manager: {{ name }}</h1>\n    <table class=\"table table-striped table-bordered\">\n      <thead>\n        <tr>\n          <th scope=\"row\" />\n          <th\n            scope=\"row\"\n            @click=\"sortBy('waitingTime')\"\n          >Created</th>\n          <th\n            scope=\"row\"\n            v-for=\"key in columns\"\n            :key=\"key\"\n            @click=\"sortBy(key)\"\n          >{{key | capitalize}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr\n          v-for=\"order in orders\"\n          :key=\"order.id\"\n        >\n          <td>\n            <button\n              class=\"btn btn-primary\"\n              @click=\"cancelOrder(order)\"\n              :disabled=\"order.state!='waiting'\"\n            >Cancel</button>\n            <button\n              class=\"btn btn-primary ml-1\"\n              @click=\"abortOrder(order)\"\n              :disabled=\"order.state!='in process'\"\n            >Abort</button>\n            <button\n              class=\"btn btn-primary ml-1\"\n              @click=\"holdOrder(order)\"\n              :disabled=\"order.state!='in process'\"\n            >Hold</button>\n          </td>\n          <td>{{order.waitingTime | formatDate}}</td>\n          <td\n            v-for=\"key in columns\"\n            :key=\"key\"\n          >{{order[key]}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n<script>\nconst manager = require(\"../opcua-manager\");\nconst utils = require(\"../utils\");\n\nexport default {\n  data: function() {\n    return {\n      name: null,\n      orders: [],\n      columns: [\n        \"id\",\n        \"name\",\n        \"state\",\n        \"cola\",\n        \"raspberry\",\n        \"lemon\",\n        \"strawberry\",\n        \"orange\"\n      ],\n      sortOrders: {}\n    };\n  },\n  methods: {\n    getOrders: function() {\n      manager.getOrders(\"\", orders => {\n        console.log(\"received orders:\", orders);\n        this.orders = orders;\n      });\n    },\n    sortBy: function(key) {\n      let sortOrder = this.sortOrders[key] || 1;\n      this.sortOrders[key] = sortOrder * -1;\n      this.orders = this.orders.sort((a, b) => {\n        a = a[key];\n        b = b[key];\n        return (a === b ? 0 : a > b ? 1 : -1) * sortOrder;\n      });\n    },\n    cancelOrder: function(order) {\n      manager.cancelOrder(order, () => {\n        this.getOrders();\n      });\n    },\n    abortOrder: function(order) {\n      manager.abortOrder(order, () => {\n        this.getOrders();\n      });\n    },\n    holdOrder: function(order) {\n      manager.holdOrder(order, () => {\n        this.getOrders();\n      });\n    }\n  },\n  filters: {\n    capitalize: str => {\n      return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    formatDate: timestamp => {\n      return utils.formatDate(timestamp);\n    }\n  },\n  mounted() {\n    this.name = this.$root.userName;\n    this.getOrders(this.name);\n  }\n};\n</script>"]}]}