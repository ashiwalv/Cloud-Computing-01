"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_lodash=require("lodash"),_d=require("d3"),_config=require("./core/config"),_render=require("./core/render"),_props=_interopRequireWildcard(require("./props")),_default={name:"vue-speedometer",props:_props["default"],template:"\n    <div></div>\n  ",beforeCreate:function beforeCreate(){this.d3_refs={pointer:!1,current_value_text:!1}},created:function created(){this._initWatchers()},mounted:function mounted(){this.renderGauge()},data:function data(){return{force_render:this.forceRender}},watch:{forceRender:function forceRender(a,b){this.force_render=a||b}},methods:{_initWatchers:function _initWatchers(){var a=this;this.updateReadings=(0,_lodash.debounce)(this._updateReadings,0,{leading:!1,trailing:!0});var b=(0,_props.getPropKeys)().filter(function(a){return"forceRender"!==a});(0,_lodash.each)(b,function(b){a.$watch(b,function(a,c){this.watchUpdater({newValue:a,oldValue:c,prop:b})})})},watchUpdater:function watchUpdater(a){var b=this,c=a.newValue,d=a.oldValue,e=a.prop;this.config=(0,_config.updateConfig)(this.config,(0,_defineProperty2["default"])({},e,c||d)),this.$nextTick().then(function(){b.updateReadings()})},renderGauge:function renderGauge(){this.config=(0,_config.getConfig)({PROPS:(0,_props.getProps)(this),parentWidth:this.$el.parentNode.clientWidth,parentHeight:this.$el.parentNode.clientHeight}),(0,_d.select)(this.$el).select("svg").remove(),this.d3_refs=(0,_render.render)({container:this.$el,config:this.config}),(0,_render.update)({d3_refs:this.d3_refs,newValue:this.value,config:this.config})},_updateReadings:function _updateReadings(){this.force_render?this.renderGauge():(0,_render.update)({d3_refs:this.d3_refs,newValue:this.config.value||0,config:this.config})}}};exports["default"]=_default;