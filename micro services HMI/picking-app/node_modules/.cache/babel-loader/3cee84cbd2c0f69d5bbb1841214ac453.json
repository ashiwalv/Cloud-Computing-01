{"remainingRequest":"/home/muddasir/work/SDMHmi/HMI/picking-app/node_modules/babel-loader/lib/index.js!/home/muddasir/work/SDMHmi/HMI/picking-app/node_modules/eslint-loader/index.js??ref--13-0!/home/muddasir/work/SDMHmi/HMI/picking-app/src/opcua-manager.js","dependencies":[{"path":"/home/muddasir/work/SDMHmi/HMI/picking-app/src/opcua-manager.js","mtime":1582122400985},{"path":"/home/muddasir/work/SDMHmi/HMI/picking-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muddasir/work/SDMHmi/HMI/picking-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/muddasir/work/SDMHmi/HMI/picking-app/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5lbmRzLXdpdGgiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGgiKTsKCnZhciBheGlvcyA9IHJlcXVpcmUoImF4aW9zIik7Cgp2YXIgc2VydmVyQWRkcmVzcyA9IHJlcXVpcmUoIi4uL2NsaWVudC5jb25maWciKS53ZWJzZXJ2ZXI7CgppZiAoIXNlcnZlckFkZHJlc3Muc3RhcnRzV2l0aCgiaHR0cCIpKSBzZXJ2ZXJBZGRyZXNzID0gImh0dHA6Ly8iICsgc2VydmVyQWRkcmVzczsKaWYgKCFzZXJ2ZXJBZGRyZXNzLmVuZHNXaXRoKCIvIikpIHNlcnZlckFkZHJlc3MgKz0gIi8iOwp2YXIgdnVlSW5zdGFuY2UgPSBudWxsLAogICAgaW5pdGlhbGl6aW5nOwp2YXIgY2FjaGUgPSB7fTsKCmV4cG9ydHMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICh2dWUpIHsKICB2YXIgX3RoaXMgPSB0aGlzOwoKICB2YXIgYWRkcmVzcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDsKICB2YXIgY291bnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7CgogIGlmICghdnVlSW5zdGFuY2UpIHsKICAgIC8vIGp1c3QgZ2V0IHRoZSB2dWUgaW5zdGFuY2UgZnJvbSBtYWluLCB0aGUgcmVhbCBpbml0aWFsaXppbmcgY2FuIG9jY3VyIGxhdGVyCiAgICB2dWVJbnN0YW5jZSA9IHZ1ZTsKICB9IGVsc2UgewogICAgaW5pdGlhbGl6aW5nID0gdHJ1ZTsKICAgIGlmICghYWRkcmVzcykgYWRkcmVzcyA9IHNlcnZlckFkZHJlc3M7CiAgICBheGlvcy5nZXQoYWRkcmVzcykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgIGFkZHJlc3MgPSAiIi5jb25jYXQoYWRkcmVzcywgInN1YnNjcmliZSIpOwogICAgICBpZiAoY291bnQpIGFkZHJlc3MgKz0gIj9jb3VudD0iICsgY291bnQ7CiAgICAgIGNvbnNvbGUubG9nKCJpbml0aWFsaXppbmcgY29ubmVjdGlvbiB0bzoiLCBhZGRyZXNzKTsKICAgICAgdnVlSW5zdGFuY2UuU1NFKGFkZHJlc3MsIHsKICAgICAgICBmb3JtYXQ6ICJqc29uIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChzc2UpIHsKICAgICAgICBjb25zb2xlLmxvZygiaW5pdGlhbGl6ZWQgY29ubmVjdGlvbiB0bzoiLCBhZGRyZXNzKTsKICAgICAgICBzc2Uub25FcnJvcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coImNvbm5lY3Rpb24gaW50ZXJydXB0ZWQiICsgZSk7CiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMuY29ubmVjdGlvbiA9IHNzZTsKICAgICAgICBpbml0aWFsaXppbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJjYW5ub3QgY29ubmVjdCB0byB3ZWJzZXJ2ZXI6ICIuY29uY2F0KHNlcnZlckFkZHJlc3MsICIsIHJldHJ5aW5nLi4uIikpOwoKICAgICAgICBfdGhpcy5pbml0aWFsaXplKHZ1ZSwgYWRkcmVzcywgY291bnQpOwogICAgICB9LCAzMDAwKTsKICAgIH0pOwogIH0KfTsKCmV4cG9ydHMuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGV2ZW50LCBjb250ZXh0LCBjYWxsYmFjaykgewogIHZhciBfdGhpczIgPSB0aGlzOwoKICBpZiAoIXRoaXMuY29ubmVjdGlvbikgewogICAgaWYgKCFpbml0aWFsaXppbmcpIHsKICAgICAgdGhpcy5pbml0aWFsaXplKCk7CiAgICB9CgogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzMi5zdWJzY3JpYmUoZXZlbnQsIGNvbnRleHQsIGNhbGxiYWNrKTsKICAgIH0sIDEwKTsKICAgIHJldHVybjsKICB9CgogIHRoaXMuY29ubmVjdGlvbi5zdWJzY3JpYmUoZXZlbnQsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICBjYWNoZVtldmVudF0gPSBkYXRhLnZhbHVlLnZhbHVlOwogICAgY2FsbGJhY2soY29udGV4dCwgZGF0YS52YWx1ZS52YWx1ZSk7CiAgfSk7CiAgaWYgKGNhY2hlW2V2ZW50XSkgY2FsbGJhY2soY29udGV4dCwgY2FjaGVbZXZlbnRdKTsKfTsKCmV4cG9ydHMuc3Vic2NyaWJlUGVyZm9ybWFuY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGNvbnRleHQsIGNvdW50LCBjYWxsYmFjaykgewogIHZhciBfdGhpczMgPSB0aGlzOwoKICB0aGlzLmNsb3NlKCk7CiAgdGhpcy5pbml0aWFsaXplKG51bGwsIHNlcnZlckFkZHJlc3MgKyAicGVyZm9ybWFuY2UvIiwgY291bnQpOwogIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgX3RoaXMzLnN1YnNjcmliZShldmVudCwgY29udGV4dCwgY2FsbGJhY2spOwogIH0sIDEwKTsKfTsKCmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAobm9kZSwgcHJvcGVydHksIHZhbHVlKSB7CiAgYXhpb3MucG9zdCgiIi5jb25jYXQoc2VydmVyQWRkcmVzcywgIndyaXRlIiksIHsKICAgICJub2RlIjogbm9kZSwKICAgICJwcm9wZXJ0eSI6IHByb3BlcnR5LAogICAgInZhbHVlIjogdmFsdWUKICB9KTsKfTsKCmV4cG9ydHMuY2FsbCA9IGZ1bmN0aW9uIChub2RlLCBtZXRob2QpIHsKICBheGlvcy5wb3N0KCIiLmNvbmNhdChzZXJ2ZXJBZGRyZXNzLCAiY2FsbCIpLCB7CiAgICAibm9kZSI6IG5vZGUsCiAgICAibWV0aG9kIjogbWV0aG9kCiAgfSk7Cn07CgpleHBvcnRzLmNsb3NlID0gZnVuY3Rpb24gKCkgewogIGlmICh0aGlzLmNvbm5lY3Rpb24pIHsKICAgIGNvbnNvbGUubG9nKCJjbG9zaW5nIGNvbm5lY3Rpb24iKTsKICAgIHRoaXMuY29ubmVjdGlvbi5jbG9zZSgpOwogICAgdGhpcy5jb25uZWN0aW9uID0gbnVsbDsKICB9Cn07CgpleHBvcnRzLmNyZWF0ZU9yZGVyID0gZnVuY3Rpb24gKG9yZGVyKSB7CiAgYXhpb3MucG9zdCgiIi5jb25jYXQoc2VydmVyQWRkcmVzcywgImNyZWF0ZU9yZGVyIiksIHsKICAgICJvcmRlciI6IG9yZGVyCiAgfSk7Cn07CgpleHBvcnRzLmdldE9yZGVycyA9IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaykgewogIGF4aW9zLmdldCgiIi5jb25jYXQoc2VydmVyQWRkcmVzcywgImdldE9yZGVycz9uYW1lPSIpLmNvbmNhdChuYW1lKSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgY2FsbGJhY2socmVzcC5kYXRhKTsKICB9KTsKfTsKCmV4cG9ydHMuY2FuY2VsT3JkZXIgPSBmdW5jdGlvbiAob3JkZXIsIGNhbGxiYWNrKSB7CiAgYXhpb3MucG9zdCgiIi5jb25jYXQoc2VydmVyQWRkcmVzcywgImNhbmNlbE9yZGVyIiksIHsKICAgICJpZCI6IG9yZGVyLmlkCiAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICBjYWxsYmFjaygpOwogIH0pOwp9OwoKZXhwb3J0cy5hYm9ydE9yZGVyID0gZnVuY3Rpb24gKG9yZGVyLCBjYWxsYmFjaykgewogIGF4aW9zLnBvc3QoIiIuY29uY2F0KHNlcnZlckFkZHJlc3MsICJhYm9ydE9yZGVyIiksIHsKICAgICJpZCI6IG9yZGVyLmlkCiAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICBjYWxsYmFjaygpOwogIH0pOwp9OwoKZXhwb3J0cy5ob2xkT3JkZXIgPSBmdW5jdGlvbiAob3JkZXIsIGNhbGxiYWNrKSB7CiAgYXhpb3MucG9zdCgiIi5jb25jYXQoc2VydmVyQWRkcmVzcywgImhvbGRPcmRlciIpLCB7CiAgICAiaWQiOiBvcmRlci5pZAogIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgY2FsbGJhY2soKTsKICB9KTsKfTs="},{"version":3,"sources":["/home/muddasir/work/SDMHmi/HMI/picking-app/src/opcua-manager.js"],"names":["axios","require","serverAddress","webserver","startsWith","endsWith","vueInstance","initializing","cache","exports","initialize","vue","address","count","get","then","console","log","SSE","format","sse","onError","e","connection","catch","setTimeout","subscribe","event","context","callback","data","value","subscribePerformance","close","write","node","property","post","call","method","createOrder","order","getOrders","name","resp","cancelOrder","id","abortOrder","holdOrder"],"mappings":"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","sourcesContent":["const axios = require(\"axios\");\nlet serverAddress = require(\"../client.config\").webserver;\nif (!serverAddress.startsWith(\"http\")) serverAddress = \"http://\" + serverAddress;\nif (!serverAddress.endsWith(\"/\")) serverAddress += \"/\";\nlet vueInstance = null, initializing;\nlet cache = {}\n\nexports.initialize = function (vue, address = null, count = null) {\n    if (!vueInstance) { // just get the vue instance from main, the real initializing can occur later\n        vueInstance = vue;\n    }\n    else {\n        initializing = true;\n        if (!address) address = serverAddress;\n        axios.get(address).then(() => {\n            address = `${address}subscribe`\n            if (count) address += \"?count=\" + count;\n            console.log(\"initializing connection to:\", address);\n            vueInstance.SSE(address, {\n                format: \"json\"\n            }).then(sse => {\n                console.log(\"initialized connection to:\", address);\n                sse.onError(e => {\n                    console.log(\"connection interrupted\" + e);\n                })\n                this.connection = sse;\n                initializing = false;\n            });\n        }).catch(() => {\n            setTimeout(() => {\n                console.log(`cannot connect to webserver: ${serverAddress}, retrying...`);\n                this.initialize(vue, address, count);\n            }, 3000);\n        });\n    }\n}\n\nexports.subscribe = function (event, context, callback) {\n    if (!this.connection) {\n        if (!initializing) {\n            this.initialize();\n        }\n        setTimeout(() => {\n            this.subscribe(event, context, callback);\n        }, 10);\n        return;\n    }\n    this.connection.subscribe(event, data => {\n        cache[event] = data.value.value;\n        callback(context, data.value.value);\n    });\n    if (cache[event]) callback(context, cache[event]);\n}\n\nexports.subscribePerformance = function (event, context, count, callback) {\n    this.close();\n    this.initialize(null, serverAddress + \"performance/\", count);\n    setTimeout(() => {\n        this.subscribe(event, context, callback);\n    }, 10);\n\n}\n\nexports.write = function (node, property, value) {\n    axios.post(`${serverAddress}write`, {\n        \"node\": node,\n        \"property\": property,\n        \"value\": value\n    });\n}\n\nexports.call = function (node, method) {\n    axios.post(`${serverAddress}call`, {\n        \"node\": node,\n        \"method\": method\n    });\n}\n\nexports.close = function () {\n    if (this.connection) {\n        console.log(\"closing connection\");\n        this.connection.close();\n        this.connection = null;\n    }\n};\n\nexports.createOrder = function (order) {\n    axios.post(`${serverAddress}createOrder`, { \"order\": order });\n}\n\nexports.getOrders = function (name, callback) {\n    axios.get(`${serverAddress}getOrders?name=${name}`).then(resp => {\n        callback(resp.data);\n    });\n}\n\nexports.cancelOrder = function (order, callback) {\n    axios.post(`${serverAddress}cancelOrder`, { \"id\": order.id }).then(() => {\n        callback();\n    });\n}\n\nexports.abortOrder = function (order, callback) {\n    axios.post(`${serverAddress}abortOrder`, { \"id\": order.id }).then(() => {\n        callback();\n    });\n}\n\nexports.holdOrder = function (order, callback) {\n    axios.post(`${serverAddress}holdOrder`, { \"id\": order.id }).then(() => {\n        callback();\n    });\n}\n"]}]}